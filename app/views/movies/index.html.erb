<h1>Movies</h1>

<table class="table table-hover">
  <thead>
    <tr>
      <th></th>
      <th><%= link_to 'Title', movies_path(page: @page, sort: 'title') %></th>
      <th><%= link_to 'Rating', movies_path(page: @page, sort: 'rating') %></th>
      <th><%= link_to 'Year', movies_path(page: @page, sort: 'release_year') %></th>
    </tr>
  </thead>
  <tbody>
    <% @movies.each do |movie| %>
      <tr>
        <td><%= image_tag movie['poster_120x171'] %></td>
        <td><%= link_to movie['title'], movie_path(movie['id']) %></td>
        <td><%= movie['rating'] %></td>
        <td><%= movie['release_year'] %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<nav>
  <ul class="pagination pagination-lg">
    <% if @page > 1 %>
      <li>
        <%= link_to movies_path(page: @page-1) do %>
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">Previous</span>
        <% end %>
      </li>
      <% if @page > 2 %>
        <li><%= link_to @page-2, movies_path(page: @page-2) %></li>
      <% end %>
      <li><%= link_to @page-1, movies_path(page: @page-1) %></li>
    <% end %>
    <li class="active"><%= link_to @page, movies_path(page: @page) %></li>
    <li><%= link_to @page+1, movies_path(page: @page+1) %></li>
    <li><%= link_to @page+2, movies_path(page: @page+2) %></li>
    <li>
      <%= link_to movies_path(page: @page+1) do %>
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only">Next</span>
      <% end %>
    </li>
  </ul>
</nav>
